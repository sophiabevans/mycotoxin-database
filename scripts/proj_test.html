
<html>
	<head>
	  <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
	  <script src="https://www.gstatic.com/charts/loader.js"></script>
		<title>DoMI Website</title>
	</head>
<body>
	<div id="Data_insertion" class="tabcontent">
		<h1>Data Insertion!</h1>
		<h3>Fill out the following fields to insert new data into the Mycotoxin Removal Database.</h3>
		<h3>Please, *double check* the accuracy of all data entered into the input fields below! Typos could prevent your data from being found in future searches.</h3>

		Literature Link: <input type="text" id="lit_link">
		<br>
		Literature Citation: <input type="text" id="lit_cite">
		<br>
		Characterization Context: <input type="text" id="char_con">
		<br>
		Characterization Assay: <input type="text" id="char_assay">
		<br><br>

		Organism Name: <input type="text" id="org_name">
		<br>
		Organism Domain:
		<select id="input_domain" name="input_domain">
			<option value="" selected disabled hidden>Select Domain</option>
			<option value="Eukarya">Eukarya</option>
			<option value="Bacteria">Bacteria</option>
			<option value="Archaea">Archaea</option>
		</select><br>
		Organism Pathogenicity:
		<select id="input_path" name="input_path">
			<option value="" selected disabled hidden>Select Pathogenicity</option>
			<option value="Pathogenic">Pathogenic</option>
			<option value="Non-Pathogenic">Non-Pathogenic</option>
			<option value="Opportunistic">Opportunistic</option>
		</select><br>
		Organism Respiration Type:
		<select id="input_aeran" name="input_aeran">
			<option value="" selected disabled hidden>Select Respiration</option>
			<option value="Aerobic">Aerobic</option>
			<option value="Anaerobic">Anaerobic</option>
			<option value="Facultative">Facultative</option>
		</select><br>
		Organism Environment:
		<input type="checkbox" name="env" id="human" value="Human"> Human
		<input type="checkbox" name="env" id="animal" value="Animal"> Animal
		<input type="checkbox" name="env" id="food" value="Food"> Food
		<input type="checkbox" name="env" id="plants" value="Plants"> Plants
		<input type="checkbox" name="env" id="soil" value="Soil"> Soil
		<input type="checkbox" name="env" id="water" value="Water"> Water
		<input type="checkbox" name="env" id="other_env" value="Other" onclick="var input = document.getElementById('other_input_env'); if(this.checked){input.disabled = false; input.focus();}else{input.disabled=true;}"> Other
		<input type="text" id="other_input_env" name="env" disabled="disabled">
		<br><br>

		Mycotoxin Name: <input type="text" id="myc_name">
		<br>

		Mycotoxin Removal Mechanism:
		<input type="checkbox" name="input_removal" id="biotran" value="Biotransformation">Biotransformation
		<input type="checkbox" name="input_removal" id="reg" value="Regulation">Regulation
		<input type="checkbox" name="input_removal" id="adsorp" value="Adsorption">Adsorption
		<input type="checkbox" name="input_removal" id="absorp" value="Absorption">Absorption
		<input type="checkbox" name="input_removal" id="deg" value="Degredation">Degradation
		<input type="checkbox" name="input_removal" id="reg" value="Regulation">Regulation
		<input type="checkbox" name="input_removal" id="unknown_rem" value="Unknown">Unknown
		<input type="checkbox" name="input_removal" id="other_rem" value="Other" onclick="var input = document.getElementById('other_input_rem'); if(this.checked){input.disabled = false; input.focus();}else{input.disabled=true;}"> Other
		<input type="text" id="other_input_rem" name="input_removal" disabled="disabled">
		<br><br>

		Enzymatic Removal?:
		<select id = "input_enz" name = "input_enz">
			<option value="" selected disabled hidden>Select Enzymatic</option>
			<option id = "yes_enz" value = "Yes">Yes</option>
			<option id = "no_enz" value = "No">No</option>
		</select><br>

		Location:
		<select id="input_loc" name="input_loc">
			<option value="" selected disabled hidden>Select Location</option>
			<option value="Intracellular">Intracellular</option>
			<option value="Extracellular">Extracellular</option>
			<option value="Unknown">Unknown</option>
		</select><br><br>

		Curator Name: <input type="text" id="cur_name">
		<br>
		Curation Date: <input type="date" id="cur_date">
		<br>
		Curation Notes: <input type="text" id="cur_notes">
		<br>
		Contributor Name: <input type="text" id="con_name">
		<br>
		Contributaion Date: <input type="date" id="con_date">
		<br>
		Additional Info: <input type="text" id="ad_info">
		<br>

		<button id="submit_input">Submit Data Input</button><br><br>

    <div id="insert_success"></div>
    <script>

      $(document).ready(function() {
        $("#submit_input").click(function() {
          $("#insert_success").empty();
					let cite=$("#lit_cite").val();
					let org_name=$("#org_name").val();
					let myc_name=$("#myc_name").val();
					let curator=$("#cur_name").val();
					let test_env=$(":checkbox[name = env]:checked");
					let test_rem=$(":checkbox[name = input_removal]:checked");
					if (checkInput(cite, org_name, myc_name, curator)) {
		        $.get("https://bioed.bu.edu/cgi-bin/students_22/Group_M/data_insert_test.py",
		          {link:$("#lit_link").val(), cite:cite,
							context:$("#char_con").val(), assay:$("#char_assay").val(),
							curator:curator, cur_date:$("#cur_date").val(),
							cur_notes:$("#cur_notes").val(), con_name:$("#con_name").val(),
							con_date:$("#con_date").val(), ad_info:$("#ad_info").val(),
							org_name:org_name, input_domain:$("#input_domain").val(),
							input_path:$("#input_path").val(), input_aeran:$("#input_aeran").val(),
							myc_name:myc_name,
							enzymatic:$("#input_enz").val(),loc:$("#input_loc").val(),
							test_env:$.makeArray(test_env), test_rem:$.makeArray(test_rem),
							other_env_txt:$("#other_input_env").val(),
							other_rem_txt:$("#other_input_rem").val()},
		          function(data){
		            input_success(data);
		          },
		          "json"
		        );
					}
        });
      });

      function input_success(data){
        $("#insert_success").append(data);
      }

			function checkInput(cite, org_name, myc_name, curator) {
				if (cite == "") {
					alert("You did not enter a citation");
					return false;
				}
				else if (org_name == "") {
					alert("You did not enter an organism name");
					return false;
				}
				else if (myc_name == "") {
					alert("You did not enter a mycotoxin name");
					return false;
				}
				else if (curator == "") {
					alert("You did not enter the curator name");
					return false;
				}
				return true;
			}

    </script>
	</div>
</body>
</html>
